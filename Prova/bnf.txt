%left PLUS MINUS
%left TIMES DIVIDE
%left NEG
%right POWER
%right SQRT

Input:
	|Input Line
;

Line: 
	END
	| Expression END
	| T_ALGORITMO T_STRING codigo T_FIMALGORITMO	
;

codigo:
	declaravariavel T_INICIO rotinas 
;

declaravariavel:
	| T_VAR 
	| T_VAR variaveis T_DOISPONTOS tipo
;

variaveis:
	variavel
	| variavel T_VIRGULA variavel 
;

variavel:
	T_VARIAVEL
;

tipo:
	T_INTEIRO
	| T_REAL
;

rotinas:
	 comentarios
	| comentarios rotina 
;

rotina:
	| T_STRING
	| Escreval
	| Escreva
	| Leia
	| Expression	
;	

cometarios:
	comentario
	| comentarios comentario
;

comentario:
	T_COMENTARIO
;

Expression:
	number { $$=$1; }
	| T_VARIAVEL {$$=$1;}
	| Expression T_ATRIBUI Expression {$1=$3;}
	| Expression PLUS Expression { $$=$1+$3; }  
	| Expression MINUS Expression { $$=$1-$3; }  
	| Expression TIMES Expression { $$=$1*$3; }  
	| Expression DIVIDE Expression { $$=$1/$3; }  
	| MINUS Expression %prec NEG { $$=-$2; }  
	| Expression POWER Expression { $$=pow($1,$3); }  
	| LEFT Expression RIGHT { $$=$2; } 
    | SQRT Expression {$$=sqrt($2);}  
	
;

number:
	T_NUMINTEIRO
	| T_NUMREAL
;

%%
